CREATE TABLE `attendance` (id INT AUTO_INCREMENT NOT NULL, user_id INT NOT NULL, presentation_id INT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME DEFAULT NULL, INDEX IDX_6DE30D91A76ED395 (user_id), INDEX IDX_6DE30D91AB627E8B (presentation_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE `utf8_unicode_ci` ENGINE = InnoDB;
CREATE TABLE `conference` (id INT AUTO_INCREMENT NOT NULL, user_id INT NOT NULL, title VARCHAR(255) NOT NULL, state INT NOT NULL, genre VARCHAR(255) NOT NULL, photo VARCHAR(255) DEFAULT NULL, place VARCHAR(255) NOT NULL, starts_at DATETIME NOT NULL, ends_at DATETIME NOT NULL, description VARCHAR(255) DEFAULT NULL, price_for_seat INT NOT NULL, capacity INT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME DEFAULT NULL, INDEX IDX_911533C8A76ED395 (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE `utf8_unicode_ci` ENGINE = InnoDB;
CREATE TABLE `presentation` (id INT AUTO_INCREMENT NOT NULL, user_id INT NOT NULL, room_id INT DEFAULT NULL, conference_id INT NOT NULL, title VARCHAR(255) NOT NULL, state INT NOT NULL, description VARCHAR(255) DEFAULT NULL, tags JSON DEFAULT NULL COMMENT '(DC2Type:json)', photo VARCHAR(255) DEFAULT NULL, starts_at DATETIME DEFAULT NULL, ends_at DATETIME DEFAULT NULL, created_at DATETIME NOT NULL, updated_at DATETIME DEFAULT NULL, INDEX IDX_9B66E893A76ED395 (user_id), INDEX IDX_9B66E89354177093 (room_id), INDEX IDX_9B66E893604B8382 (conference_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE `utf8_unicode_ci` ENGINE = InnoDB;
CREATE TABLE `question` (id INT AUTO_INCREMENT NOT NULL, presentation_id INT NOT NULL, user_id INT NOT NULL, question VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME DEFAULT NULL, INDEX IDX_B6F7494EAB627E8B (presentation_id), INDEX IDX_B6F7494EA76ED395 (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE `utf8_unicode_ci` ENGINE = InnoDB;
CREATE TABLE `reservation` (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, conference_id INT NOT NULL, num_of_people INT NOT NULL, state INT NOT NULL, first_name VARCHAR(255) NOT NULL, last_name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME DEFAULT NULL, INDEX IDX_42C84955A76ED395 (user_id), INDEX IDX_42C84955604B8382 (conference_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE `utf8_unicode_ci` ENGINE = InnoDB;
CREATE TABLE `room` (id INT AUTO_INCREMENT NOT NULL, conference_id INT NOT NULL, address VARCHAR(255) DEFAULT NULL, room_number VARCHAR(255) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME DEFAULT NULL, INDEX IDX_729F519B604B8382 (conference_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE `utf8_unicode_ci` ENGINE = InnoDB;
CREATE TABLE `user` (id INT AUTO_INCREMENT NOT NULL, first_name VARCHAR(255) NOT NULL, last_name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, state INT NOT NULL, password VARCHAR(255) NOT NULL, role VARCHAR(255) NOT NULL, last_logged_at DATETIME DEFAULT NULL, created_at DATETIME NOT NULL, updated_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_8D93D649E7927C74 (email), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE `utf8_unicode_ci` ENGINE = InnoDB;
ALTER TABLE `attendance` ADD CONSTRAINT FK_6DE30D91A76ED395 FOREIGN KEY (user_id) REFERENCES `user` (id) ON DELETE CASCADE;
ALTER TABLE `attendance` ADD CONSTRAINT FK_6DE30D91AB627E8B FOREIGN KEY (presentation_id) REFERENCES `presentation` (id) ON DELETE CASCADE;
ALTER TABLE `conference` ADD CONSTRAINT FK_911533C8A76ED395 FOREIGN KEY (user_id) REFERENCES `user` (id) ON DELETE CASCADE;
ALTER TABLE `presentation` ADD CONSTRAINT FK_9B66E893A76ED395 FOREIGN KEY (user_id) REFERENCES `user` (id) ON DELETE CASCADE;
ALTER TABLE `presentation` ADD CONSTRAINT FK_9B66E89354177093 FOREIGN KEY (room_id) REFERENCES `room` (id) ON DELETE SET NULL;
ALTER TABLE `presentation` ADD CONSTRAINT FK_9B66E893604B8382 FOREIGN KEY (conference_id) REFERENCES `conference` (id) ON DELETE CASCADE;
ALTER TABLE `question` ADD CONSTRAINT FK_B6F7494EAB627E8B FOREIGN KEY (presentation_id) REFERENCES `presentation` (id) ON DELETE CASCADE;
ALTER TABLE `question` ADD CONSTRAINT FK_B6F7494EA76ED395 FOREIGN KEY (user_id) REFERENCES `user` (id) ON DELETE CASCADE;
ALTER TABLE `reservation` ADD CONSTRAINT FK_42C84955A76ED395 FOREIGN KEY (user_id) REFERENCES `user` (id) ON DELETE CASCADE;
ALTER TABLE `reservation` ADD CONSTRAINT FK_42C84955604B8382 FOREIGN KEY (conference_id) REFERENCES `conference` (id) ON DELETE CASCADE;
ALTER TABLE `room` ADD CONSTRAINT FK_729F519B604B8382 FOREIGN KEY (conference_id) REFERENCES `conference` (id) ON DELETE CASCADE;
